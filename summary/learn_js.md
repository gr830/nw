# learn.javascript.ru

## Введение

### Введение в JavaScript

Изначально JavaScript был создан, чтобы «сделать веб-страницы живыми»

Сегодня JavaScript может выполняться не только в браузере, но и на сервере или на любом другом устройстве, которое имеет специальную программу, называющуюся «движком» JavaScript

Движки сложны. Но основы понять легко.
- Движок (встроенный, если это браузер) читает («парсит») текст скрипта.
- Затем он преобразует («компилирует») скрипт в машинный язык.
- После этого машинный код запускается и работает достаточно быстро.

Возможности JavaScript в браузере ограничены ради безопасности пользователя. 
- JavaScript на веб-странице не может читать/записывать произвольные файлы на жёстком диске, копировать их или запускать программы. Он не имеет прямого доступа к системным функциям ОС.
- Различные окна/вкладки не знают друг о друге. «Политика одинакового источника».

Как минимум, три сильные стороны JavaScript:
- Полная интеграция с HTML/CSS.
- Простые вещи делаются просто.
- Поддерживается всеми основными браузерами и включён по умолчанию.

### Справочники и спецификации

Спецификация ECMA содержит самую глубокую, детальную и формализованную информацию о JavaScript

MDN (Mozilla) JavaScript Reference – это справочник с примерами и другой информацией. Хороший источник для получения подробных сведений о функциях языка, методах встроенных объектов и так далее.

Таблицы совместимости - https://caniuse.com – таблицы с информацией о поддержке 

### Редакторы кода

Термином IDE (Integrated Development Environment, «интегрированная среда разработки») называют мощные редакторы с множеством функций, которые работают в рамках целого проекта. Как видно из названия, это не просто редактор, а нечто большее.

### Консоль разработчика

Но по умолчанию в браузере ошибки не видны.
Для решения задач такого рода в браузер встроены так называемые «Инструменты разработки».

Нажмите F12

## Основы JavaScript

### Привет, мир!

Для серверных сред (например, Node.js), вы можете выполнить скрипт с помощью команды типа "node my.js"

Тег «script»
```html
 <script>
    alert( 'Привет, мир!' );
 </script>

<!-- Внешние скрипты  -->
<script src="/path/to/script.js"></script>
```
- /path/to/script.js – это абсолютный путь от корневой папки
- можно указать относительный путь от текущей страницы. Например, src="script.js"

### Структура кода

- Инструкции – это синтаксические конструкции и команды, которые выполняют действия
- Инструкции могут отделяться точкой с запятой
- В большинстве случаев точку с запятой можно не ставить, если есть переход на новую строку
- В некоторых ситуациях новая строка всё же не означает точку с запятой
```js
alert(3 +
1
+ 2);

//будет ошибка
alert('Hello')
[1, 2].forEach(alert);
//alert('Hello')[1, 2].forEach(alert);
```
- Мы рекомендуем ставить точку с запятой между инструкциями, даже если они отделены переносами строк

**Комментарии**
- Ctrl+/ для однострочного комментария 
- Ctrl+Shift+/ – для многострочных комментариев
- Вложенные комментарии не поддерживаются! Не может быть /*...*/ внутри /*...*/.
```js
// Этот комментарий занимает всю строку
/* Пример с двумя сообщениями.
Это - многострочный комментарий.
*/
```

### Строгий режим — "use strict"

- Убедитесь, что «use strict» находится в начале
- Нет никакого способа отменить use strict
- Позже, когда весь ваш код будет состоять из классов и модулей, директиву можно будет опускать, они автоматически включают строгий режим
```js
"use strict";
// этот код работает в современном режиме
```

```js
alert("some code");
// "use strict" ниже игнорируется - он должен быть в первой строке
"use strict";
```

### Переменные

Переменная – это «именованное хранилище» для данных. 

```js
let message;
message = 'Hello!';
alert(message); // показывает содержимое переменной

//можем объявить несколько переменных в одной строке
let user = 'John', age = 25, message = 'Hello';

//____
//можем объявить две переменные и скопировать данные из одной в другую
let hello = 'Hello world!';

let message;

// копируем значение 'Hello world' из переменной hello в переменную message
message = hello;

// теперь две переменные содержат одинаковые данные
alert(hello); // Hello world!
alert(message); // Hello world!

//_____
//Повторное объявление вызывает ошибку
let message = "Это";
let message = "Другое"; // SyntaxError: 'message'

//____
//Это плохая практика, которая приводит к ошибке в строгом режиме:
"use strict";
num = 5; // ошибка: num is not defined
```

**Имена переменных**
- Имя переменной должно содержать только буквы, цифры или символы $ и _.
- Первый символ не должен быть цифрой.
- обычно используется верблюжья нотация - myVeryLongName
- дефис '-' не разрешён в имени
- Регистр имеет значение
- Нелатинские буквы разрешены, но не рекомендуются
- Существует список зарезервированных слов, которые нельзя использовать в качестве имён переменных, потому что они используются самим языком.

**Константы**

- Их нельзя изменить. Попытка сделать это приведёт к ошибке
```js
const myBirthday = '18.04.1982';
myBirthday = '01.01.2001'; // ошибка, константу нельзя перезаписать!

//____
//Константы в верхнем регистре - константы с именами, записанными заглавными буквами, используются только как псевдонимы для «жёстко закодированных» значений
const COLOR_RED = "#F00";
```

**Придумывайте правильные имена**

- ясный и понятный смысл
- говорить о том, какие данные в ней хранятся

**Итого**

- let – это современный способ объявления.
- var – это устаревший способ объявления
- const – похоже на let, но значение переменной не может изменяться.

### Типы данных

Есть восемь основных типов данных в JavaScript

**Число**

- представляет как целочисленные значения, так и числа с плавающей точкой
- cуществует множество операций для чисел, например, умножение *, деление /, сложение +, вычитание -
-  существуют так называемые «специальные числовые значения», которые относятся к этому типу данных: Infinity, -Infinity и NaN.

```js
let n = 123;
n = 12.345;
alert( 1 / 0 ); // Infinity

//NaN означает вычислительную ошибку. Это результат неправильной или неопределённой математической операции
//Любая математическая операция с NaN возвращает NaN
"не число" / 2 // NaN
alert( NaN + 1 ); 
```

**BigInt**

- все нечетные целые числа, большие чем (253-1), вообще не могут храниться в типе number
- необходимо добавить n в конец

```js
const bigInt = 1234567890123456789012345678901234567890n;
```

**Строка**

```js
let str = "Привет";
let str2 = 'Одинарные кавычки тоже подойдут';
//Обратные же кавычки имеют расширенную функциональность
let phrase = `Обратные кавычки позволяют встраивать переменные ${str}`;
```

**Булевый (логический) тип**

- true (истина) и false (ложь).

```js
let isGreater = 4 > 1;// true (результатом сравнения будет "да")
```

**Значение «null»**

- представляет собой «ничего», «пусто» или «значение неизвестно».
```js
let age = null;
```

**Значение «undefined»**
- сли переменная объявлена, но ей не присвоено никакого значения
```js
let age;
alert(age); // выведет "undefined"
```

**Объекты и символы**

Тип object (объект) – особенный.
- Все остальные типы называются «примитивными», потому что их значениями могут быть только простые значения (будь то строка, или число, или что-то ещё). В объектах же хранят коллекции данных или более сложные структуры.

**Тип symbol**

Используется для создания уникальных идентификаторов в объекта.

**Оператор typeof**

```js
// Обычный синтаксис
typeof 5 // Выведет "number"
// Синтаксис, напоминающий вызов функции (встречается реже),скобки необходимы для определения типа значения, которое получилось в результате выполнения выражения
typeof(5) // Также выведет "number

typeof undefined // "undefined"
typeof 0 // "number"
typeof 10n // "bigint"
typeof true // "boolean"
typeof "foo" // "string"
typeof Symbol("id") // "symbol"
typeof Math // "object"  (1) / Math — это встроенный объект
typeof null // "object"  (2) / Это официально признанная ошибка в typeof
typeof alert // "function"  (3) / alert является функцие / Функции относятся к объектному типу. Но typeof обрабатывает их особым образом, возвращая "function"
```

### Взаимодействие: alert, prompt, confirm

- alert- она показывает сообщение и ждёт, пока пользователь нажмёт кнопку «ОК»
```js
alert("Hello");
```
- prompt - отобразит модальное окно с текстом,default
необязательный второй параметр, который устанавливает начальное значен
```js
let age = prompt('Сколько тебе лет?', 100);
```
- confirm - функция confirm отображает модальное окно с текстом вопроса question и двумя кнопками: OK и Отмена.
```js
let isBoss = confirm("Ты здесь главный?");
alert( isBoss ); // true, если нажата OK
```

### Преобразование типов

**Строковое преобразование**
```js
let value = true;
value = String(value); // теперь value это строка "true
```

**Численное преобразование**

Если строка не может быть явно приведена к числу, то результатом преобразования будет NaN.

```js
alert( "6" / "2" ); // 3, строки преобразуются в числа

//явно преобразовать value
let str = "123";
let num = Number(str); // становится числом 1
```

- undefined - NaN
- null - 0
- true / false	1 /  - 0
- string	Пробельные символы (пробелы, знаки табуляции \t, знаки новой строки \n и т. п.) по краям обрезаются. Далее, если остаётся пустая строка, то получаем 0, иначе из непустой строки «считывается» число. При ошибке результат NaN.

**Логическое преобразование**

Правило преобразования:
- Значения, которые интуитивно «пустые», вроде 0, пустой строки, null, undefined и NaN, становятся false.
- Все остальные значения становятся true
```js
alert( Boolean(1) ); // true
alert( Boolean(0) ); // false
```

### Базовые операторы, математика

**Термины: «унарный», «бинарный», «операнд»**

Операнд – то, к чему применяется оператор. 

Унарным называется оператор, который применяется к одному операнду
```js
let x = 1;
x = -x;
```

Бинарным называется оператор, который применяется к двум операндам
```js
y - x
```

**Математика**

- Сложение +,
- Вычитание -,
- Умножение *,
- Деление /,
- Взятие остатка от деления %,
- Возведение в степень **

```js
5 % 2 ; // 1, остаток от деления 5 на 2
2 ** 2 ; // 2² = 4
 4 ** (1/2) ; // 2 (степень 1/2 эквивалентна взятию квадратного корня)
```

### Сложение строк при помощи бинарного +

```js
let s = "моя" + "строка"; // моястрока
'1' + 2 ; // "12"
2 + 2 + '1' ; // будет "41", а не "221"
```

Другие арифметические операторы работают только с числами и всегда преобразуют операнды в числа.
```js
6 - '2' ; // 4, '2'
```

**Приведение к числу, унарный +**

- Если операнд не число, унарный плюс преобразует его в число.
```js
+true ; // 1

let apples = "2";
let oranges = "3";
// оба операнда предварительно преобразованы в числа
alert( +apples + +oranges ); // 5
```

**Приоритет операторов**

В JavaScript много операторов. Каждый оператор имеет соответствующий номер приоритета. Тот, у кого это число больше, – выполнится раньше. Если приоритет одинаковый, то порядок выполнения – слева направо.

**Присваивание**

Один из самых низких приоритетов: 2
```js
let x = 2 * 2 + 1; // 5
```

Присваивание = возвращает значение
```js
let a = 1;
let b = 2;
let c = 3 - (a = b + 1);
alert( a ); // 3
alert( c ); // 0
```

Присваивание по цепочке
```js
let a, b, c;
a = b = c = 2 + 2;
alert( a ); // 4
alert( b ); // 4
alert( c ); // 4
```

Сокращённая арифметика с присваиванием
```js
let n = 2;
n += 5; // теперь n = 7 (работает как n = n + 5)
n *= 2; // теперь n = 14 (работает как n = n * 
```

**Инкремент/декремент**

Инкремент ++ увеличивает переменную на 1:
```js
let counter = 2;
counter++;        // работает как counter = counter + 1, просто запись короче
```

Декремент -- уменьшает переменную на 1:
```js
let counter = 2;
counter--;        // работает как counter = counter - 1, просто запись короче
```

Операторы ++ и -- могут быть расположены не только после, но и до переменной.
- Когда оператор идёт после переменной — это «постфиксная форма»: counter++,постфиксная форма возвращает старое (до увеличения/уменьшения числа)
```js
let counter = 1;
let a = counter++; // (*) меняем ++counter на counter++
alert(a); // 1
```
- «Префиксная форма» — это когда оператор идёт перед переменной: ++counter.
```js
let counter = 1;
let a = ++counter; // (*)
alert(a); // 2
```

Если результат оператора не используется, а нужно только увеличить/уменьшить переменную, тогда без разницы, какую форму использовать.Если хочется тут же использовать результат, то нужна префиксная форма.

Операторы ++/-- могут также использоваться внутри выражений.
```js
let counter = 1;
alert( 2 * ++counter ); 
```

**Побитовые операторы**

Побитовые операторы работают с 32-разрядными целыми числами
- AND(и) ( & )
- OR(или) ( | )
- XOR(побитовое исключающее или) ( ^ )
- NOT(не) ( ~ )
- LEFT SHIFT(левый сдвиг) ( << )
- RIGHT SHIFT(правый сдвиг) ( >> )
- ZERO-FILL RIGHT SHIFT(правый сдвиг с заполнением нулями) ( >>> )

**Оператор «запятая»**

- написания более короткого кода
- но возвращается результат только последнего
```js
let a = (1 + 2, 3 + 4);// 7 (результат вычисления 3 + 4)

//Запятая имеет очень низкий приоритет,ниже =
a = 1 + 2, 3 + 4;
alert(a); // 3 

// три операции в одной строке
for (a = 1, b = 3, c = a * b; a < 10; a++) {}
```

### Операторы сравнения

**Результат сравнения имеет логический тип**

- true – означает «да», «верно», «истина».
- false – означает «нет», «неверно», «ложь

```js
2 > 1 ;  // true
```

**Сравнение строк**

- строки сравниваются посимвольно
- К равна К.
- о равна о.
- т больше, чем д. На этом сравнение заканчивается. Первая строка больше.
```js
'Я' > 'А' ; // true
'Коты' > 'Кода' ; // true
```

**Сравнение разных типов**

- При сравнении значений разных типов JavaScript приводит каждое из них к числу.

```js
'2' > 1 ; // true, строка '2' становится числом 2
'01' == 1 ; // true, строка '01' становится числом 1

let a = 0;
Boolean(a); // false
let b = "0";
Boolean(b); // true
a == b; // true
```

**Строгое сравнение**

Оператор строгого равенства === проверяет равенство без приведения типов.
```js
0 == false ; // true
0 === false ; // false, так как сравниваются разные типы
```

**Сравнение с null и undefined**

Значения null/undefined преобразуются к числам: null становится 0, а undefined – NaN.

```js
null === undefined ; // false

null == 0 ; // (2) false
//Сравнения преобразуют null в число
alert( null >= 0 ); // (3) true
```

Значение undefined несравнимо с другими значениями:
- undefined преобразуется в NaN
```js
undefined > 0 ; // false (1)
```

**Не используйте сравнения >= > < <= с переменными, которые могут принимать значения null/undefined, разве что вы полностью уверены в том, что делаете. Если переменная может принимать эти значения, то добавьте для них отдельные проверки.**

### Условное ветвление: if, '?'

**Инструкция «if»**

Инструкция if(...) вычисляет условие в скобках и, если результат true

```js
if (year == 2015) alert( 'Вы правы!' );

if (year == 2015) {
   //...
}
```

**Преобразование к логическому типу**

- if (…) вычисляет выражение в скобках и преобразует результат к логическому типу
- Инструкция if может содержать необязательный блок «else» («иначе»)
- Иногда нужно проверить несколько вариантов условия. Для этого используется блок else if

```js
let year = 2013
if (year < 2015) {
  alert( 'Это слишком рано...' );
} else if (year > 2015) {
  alert( 'Это поздновато' );
} else {
  alert( 'Верно!' );
}
```

**Условный оператор „?“**

- Его также называют тернарный

```js
let accessAllowed = (age > 18) ? true : false;
```

**Несколько операторов „?“**

```js
let message = (age < 3) ? 'Здравствуй, малыш!' :
  (age < 18) ? 'Привет!' :
  (age < 100) ? 'Здравствуйте!' :
  'Какой необычный возраст!';
```

### Логические операторы

- || (ИЛИ)
- && (И) 
- ! (НЕ)
- ?? (Оператор нулевого слияния)

**|| (ИЛИ)**

-  в случае, если какой-либо из аргументов true, он вернёт true, в противоположной ситуации возвращается fals

```js
alert( true || true );   // true
alert( false || true );  // true
alert( true || false );  // true
alert( false || false ); // false
```

**ИЛИ "||" находит первое истинное значение**

- цепочка ИЛИ || возвращает первое истинное значение или последнее, если такое значение не найдено.

```js
undefined || null || 0 ; // 0 (поскольку все ложно, возвращается последнее значение)

//Если бы все переменные были ложными, в качестве результата мы бы наблюдали "Аноним".
let firstName = "";
let lastName = "";
let nickName = "Суперкодер";
alert( firstName || lastName || nickName || "Аноним"); // Суперкодер
```

**||= (Логическое присваивание ИЛИ)**

- Если a ложно, присваивает a значение b
```js
a || (a = b);

//__
let johnHasCar = false;
johnHasCar ||= "У Джона нет машины!"; // то же самое, что false || (johnHasCar = "...")
alert( johnHasCar ); // "У Джона нет машины!"

//можем переписать приведённые выше примеры с использованием обычного if
let johnHasCar = false;
if (johnHasCar == false) {
  johnHasCar = "У Джона нет машины!";
}
alert(johnHasCar); // "У Джона нет машины!"
```

**&& (И)**

